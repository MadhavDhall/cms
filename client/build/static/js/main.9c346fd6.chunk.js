(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a.n(s),n=a(15),c=a.n(n),o=(a(28),a(4)),i=a.n(o),l=a(6),d=a(5),u=a(9),p=a(3),m=a.p+"static/media/form.cc73cf26.png",j=a(2),b=(a(21),a(0)),h=function(e){var t=Object(p.f)();return Object(s.useEffect)((function(){(function(){var a=Object(l.a)(i.a.mark((function a(){var s,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("/cms-admin/".concat(e.url));case 3:return s=a.sent,a.next=6,s.json();case 6:return r=a.sent,console.log(r),a.abrupt("return",r.success?"":t.push(r.redirect));case 11:a.prev=11,a.t0=a.catch(0),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}})()()}),[t,e.url]),Object(b.jsx)(j.a,{})},O=a(16),g=a(8),f=function(e){var t,a,s=e.inputs,r=e.data,n=e.setData,c=e.submit,o=e.submitValue,i=function(e){t=e.target.name,a=e.target.value,n(Object(g.a)(Object(g.a)({},r),{},Object(O.a)({},t,a)))};return Object(b.jsxs)("form",{method:"POST",onSubmit:c,className:"col-12 col-md-6 d-flex flex-column justify-content-center",children:[s.map((function(e,t){var a=e.type,s=e.name,n=e.placeholder,c=e.icon;return Object(b.jsxs)("div",{className:"input-field",children:[Object(b.jsx)("input",{value:r[s],onChange:i,required:!0,type:a,name:s,id:t,placeholder:n,autoComplete:"on"}),Object(b.jsx)("label",{htmlFor:t,className:c})]},t)})),Object(b.jsx)("input",{type:"submit",value:o,className:"btn btn-success"})]})},x=function(){var e=Object(s.useContext)(R),t=e.state,a=e.dispatch,r=Object(p.f)(),n=Object(s.useState)({email:"",pass:""}),c=Object(d.a)(n,2),o=c[0],O=c[1],g=function(){var e=Object(l.a)(i.a.mark((function e(s){var n,c,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),n=o.email,c=o.pass,O({email:"",pass:""}),e.prev=3,e.next=6,fetch("/cms-admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,pass:c})});case 6:return l=e.sent,e.next=9,l.json();case 9:d=e.sent,console.log(d),200!==l.status?j.b.warn(d.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(a({type:"changeAdmin",payload:t+1}),r.push("/admin")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:"login"}),Object(b.jsx)("div",{className:"center-box container",children:Object(b.jsxs)("div",{className:"row box gy-3 p-3 p-md-3 p-lg-5",children:[Object(b.jsx)("h2",{className:"text-center mb-4 m-0",children:"Madhav Dhall CMS Login"}),Object(b.jsx)(f,{submit:g,submitValue:"Login",inputs:[{type:"email",name:"email",placeholder:"E-mail",icon:"fas fa-envelope"},{type:"password",name:"pass",placeholder:"Password",icon:"fas fa-lock"}],data:o,setData:O}),Object(b.jsx)("figure",{className:"col-12 m-auto col-md-5 col-lg-5 col-xl-5",children:Object(b.jsx)("img",{src:m,className:"img-fluid",alt:"Login"})}),Object(b.jsx)(u.b,{to:"/admin/forgot-password",className:"my-0",children:"Forgot Password"})]})})]})},v=function(){return Object(b.jsx)("div",{children:"Not Found"})},w=function(){var e=(new Date).getFullYear();return Object(b.jsxs)("footer",{children:["\xa9 ",e," Madhav Dhall"]})},y=function(){var e=Object(p.f)(),t=Object(s.useState)({username:"",password:"",clusterurl:""}),a=Object(d.a)(t,2),r=a[0],n=a[1],c=function(){var t=Object(l.a)(i.a.mark((function t(a){var s,c,o,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s=r.username,c=r.password,o=r.clusterurl,n({username:"",password:"",clusterurl:""}),t.prev=3,t.next=6,fetch("/cms-admin/setup/1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:c,clusterurl:o})});case 6:return l=t.sent,t.next=9,l.json();case 9:d=t.sent,201!==l.status?j.b.warn(d.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(j.b.success("Connection successful. Wait till you are redirected to next setup page.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout((function(){e.push("/admin/setup/2")}),5e3)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:"setup/1"}),Object(b.jsxs)("div",{className:"center-box container",children:[Object(b.jsxs)("div",{className:"row box gy-3 p-2 p-md-3 p-lg-5",children:[Object(b.jsx)("h2",{className:"text-center mb-4 m-0",children:"Madhav Dhall CMS Setup (Step 1/2)"}),Object(b.jsx)("h3",{className:"m-0",children:"Database Details"}),Object(b.jsx)("h6",{children:"**MongoDB Database Required"}),Object(b.jsx)(f,{submit:c,submitValue:"Next",inputs:[{type:"text",name:"username",placeholder:"User Name",icon:"fa fa-user"},{type:"password",name:"password",placeholder:"Password",icon:"fas fa-lock"},{type:"text",name:"clusterurl",placeholder:"Cluster URL",icon:"fas fa-server"}],data:r,setData:n}),Object(b.jsx)("figure",{className:"col-12 m-auto col-md-5 col-lg-5 col-xl-5",children:Object(b.jsx)("img",{src:m,className:"img-fluid",alt:"Setup"})})]}),Object(b.jsx)("h5",{children:"Note- If you experience continuous redirect after submitting form or in any process during setup, its not due an error or problem and no need to panic and just wait till it redirects to next form. It happens due to slow server restarting process."}),Object(b.jsx)("br",{})]})]})},C=function(){var e=Object(p.f)(),t=Object(s.useState)({wname:"",name:"",email:"",password:"",cpassword:""}),a=Object(d.a)(t,2),r=a[0],n=a[1],c=function(){var t=Object(l.a)(i.a.mark((function t(a){var s,c,o,l,d,u,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s=r.wname,c=r.email,o=r.name,l=r.password,d=r.cpassword,l!==d){t.next=19;break}return n({wname:"",name:"",email:"",password:"",cpassword:""}),t.prev=4,t.next=7,fetch("/cms-admin/setup/2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wname:s,email:c,name:o,password:l})});case 7:return u=t.sent,t.next=10,u.json();case 10:p=t.sent,201!==u.status?j.b.warn(p.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(j.b.success("Click on the link sent on E-mail given to verify.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout((function(){e.push("/admin/setup/2")}),5e3)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 17:t.next=21;break;case 19:n(Object(g.a)(Object(g.a)({},r),{},{cpassword:""})),j.b.warn("Both passwords must match",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 21:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:"setup/2"}),Object(b.jsx)("div",{className:"center-box container",children:Object(b.jsxs)("div",{className:"row box gy-3 p-2 p-md-3 p-lg-5",children:[Object(b.jsx)("h2",{className:"text-center mb-4 m-0",children:"Madhav Dhall CMS Setup(2/2)"}),Object(b.jsx)(f,{submit:c,submitValue:"Set CMS",inputs:[{type:"text",name:"wname",placeholder:"Website Name",icon:"fas fa-window-maximize"},{type:"text",name:"name",placeholder:"Owner Name",icon:"fa fa-user"},{type:"email",name:"email",placeholder:"Owner E-mail",icon:"fas fa-envelope"},{type:"password",name:"password",placeholder:"Owner Password",icon:"fas fa-lock"},{type:"password",name:"cpassword",placeholder:"Confirm Owner Password",icon:"fas fa-lock"}],data:r,setData:n}),Object(b.jsx)("figure",{className:"col-12 m-auto col-md-5 col-lg-5 col-xl-5",children:Object(b.jsx)("img",{src:m,className:"img-fluid",alt:"Register"})})]})})]})},N=[{name:"Dashboard",path:""},{name:"My Profile",path:"profile"},{name:"Admins",path:"admins"}],k=function(){return Object(b.jsx)("div",{className:"col-8 col-sm-6 d-none d-md-block col-md-3 col-lg-3 col-xl-1 sidenav theme",children:Object(b.jsx)("ul",{children:N.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)(u.b,{to:"/admin/".concat(e.path),children:e.name})},t)}))})})},P=function(){var e=Object(s.useState)({name:"",email:""}),t=Object(d.a)(e,2),a=t[0],r=t[1],n=Object(s.useContext)(R).data;return Object(s.useEffect)((function(){r({name:n.name,email:n.email})}),[n]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"theme d-flex flex-column header",children:Object(b.jsxs)("div",{className:"ms-auto",children:[Object(b.jsxs)(u.b,{to:"/admin/profile",className:"fas fa-user-circle text-light text-decoration-none",children:["\xa0",a.name]}),"\xa0",Object(b.jsx)(u.b,{to:"/admin/logout",className:"fas fa-sign-out-alt text-danger text-decoration-none"})]})})})},S=function(){var e=Object(s.useContext)(R).data,t=Object(s.useState)({name:"",email:""}),a=Object(d.a)(t,2),r=(a[0],a[1]);return Object(s.useEffect)((function(){r({name:e.name,email:e.email})}),[e]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:""}),Object(b.jsx)(P,{}),Object(b.jsxs)("section",{className:"admin",children:[Object(b.jsx)(k,{}),Object(b.jsx)("div",{children:"Madhav"})]})]})},B=function(){var e=Object(p.f)(),t=Object(s.useState)({name:"",email:"",password:"",cpassword:""}),a=Object(d.a)(t,2),r=a[0],n=a[1],c=function(){var t=Object(l.a)(i.a.mark((function t(a){var s,c,o,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s=r.name,c=r.email,o=r.password,r.cpassword!==o){t.next=19;break}return n({name:"",email:"",password:"",cpassword:""}),t.prev=4,t.next=7,fetch("/cms-admin/add-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:c,password:o})});case 7:return l=t.sent,t.next=10,l.json();case 10:201!==(d=t.sent).status?j.b.warn(d.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(window.confirm(d.message),e.push("/admin/login")),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 17:t.next=21;break;case 19:j.b.warn("Passwords must match.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n(Object(g.a)(Object(g.a)({},r),{},{cpassword:""}));case 21:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:"add-admin"}),Object(b.jsx)("div",{className:"center-box container",children:Object(b.jsxs)("div",{className:"row box gy-3 p-2 p-md-3 p-lg-5",children:[Object(b.jsx)("h2",{className:"text-center mb-4 m-0",children:"Add Admin"}),Object(b.jsx)(f,{submit:c,submitValue:"Add Admin",inputs:[{type:"text",name:"name",placeholder:"Name",icon:"fa fa-user"},{type:"email",name:"email",placeholder:"E-mail",icon:"fas fa-envelope"},{type:"password",name:"password",placeholder:"Password",icon:"fas fa-lock"},{type:"password",name:"cpassword",placeholder:"Confirm Password",icon:"fas fa-lock"}],data:r,setData:n}),Object(b.jsx)("figure",{className:"col-12 m-auto col-md-5 col-lg-5 col-xl-5",children:Object(b.jsx)("img",{src:m,className:"img-fluid",alt:"Add admin"})})]})})]})},D=function(){var e=Object(s.useState)({email:""}),t=Object(d.a)(e,2),a=t[0],r=t[1],n=function(){var e=Object(l.a)(i.a.mark((function e(t){var s,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=a.email,r({email:""}),e.prev=3,e.next=6,fetch("/cms-admin/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});case 6:return n=e.sent,e.next=9,n.json();case 9:200!==(c=e.sent).status?j.b.warn(c.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):j.b.success(c.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:"forgot-password"}),Object(b.jsx)("div",{className:"center-box container",children:Object(b.jsxs)("div",{className:"row box gy-3 p-2 p-md-3 p-lg-5",children:[Object(b.jsx)("h2",{className:"text-center mb-4 m-0",children:"Forgot Password"}),Object(b.jsx)(f,{submit:n,submitValue:"Reset Password",inputs:[{type:"email",placeholder:"Your E-mail",name:"email",icon:"fas fa-envelope"}],data:a,setData:r}),Object(b.jsx)("figure",{className:"col-12 m-auto col-md-5 col-lg-5 col-xl-5",children:Object(b.jsx)("img",{src:m,className:"img-fluid",alt:"Forgot Password"})})]})})]})},H=function(){var e=window.location.search,t=Object(p.f)(),a=Object(s.useState)({password:"",cpassword:""}),r=Object(d.a)(a,2),n=r[0],c=r[1],o=function(){var a=Object(l.a)(i.a.mark((function a(s){var r,o,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),r=n.password,n.cpassword!==r){a.next=18;break}return a.prev=3,a.next=6,fetch("/cms-admin/change-password".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r})});case 6:return o=a.sent,a.next=9,o.json();case 9:l=a.sent,201!==o.status?j.b.warn(l.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(window.confirm("Password changed successfully."),t.push("/admin/login")),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(3),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 16:a.next=20;break;case 18:c(Object(g.a)(Object(g.a)({},n),{},{cpassword:""})),j.b.warn("Both passwords must match",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 20:case"end":return a.stop()}}),a,null,[[3,13]])})));return function(e){return a.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:"change-password".concat(e)}),Object(b.jsx)("div",{className:"center-box container",children:Object(b.jsxs)("div",{className:"row box gy-3 p-2 p-md-3 p-lg-5",children:[Object(b.jsx)("h2",{className:"text-center mb-4 m-0",children:"Change Password"}),Object(b.jsx)(f,{submit:o,submitValue:"Change Password",inputs:[{type:"password",placeholder:"New Password",name:"password",icon:"fas fa-lock"},{type:"password",placeholder:"Confirm New Password",name:"cpassword",icon:"fas fa-lock"}],data:n,setData:c}),Object(b.jsx)("figure",{className:"col-12 m-auto col-md-5 col-lg-5 col-xl-5",children:Object(b.jsx)("img",{src:m,className:"img-fluid",alt:"Forgot Password"})})]})})]})},T=function(){var e=Object(s.useContext)(R).data,t=Object(s.useState)(e),a=Object(d.a)(t,2),r=a[0],n=a[1],c=[{type:"text",placeholder:"Your Name",name:"name",icon:"fa fa-user"}],o=Object(s.useState)({name:r.name}),p=Object(d.a)(o,2),m=p[0],O=p[1],g=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("/cms-admin/change-name",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.name})});case 4:return a=e.sent,e.next=7,a.json();case 7:s=e.sent,201!==a.status?j.b.warn(s.message,{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(j.b.success("Name changed successfully.",{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout((function(){window.location.reload()}),2e3)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),x=Object(s.useState)(Object(b.jsx)(f,{inputs:c,data:m,setData:O,submit:g,submitValue:"Change Nam"})),v=Object(d.a)(x,2),w=v[0],y=v[1];Object(s.useEffect)((function(){n(e),O({name:e.name})}),[e]),Object(s.useEffect)((function(){y(Object(b.jsx)(f,{inputs:c,data:m,setData:O,submit:g,submitValue:"Change Name"}))}),[m]);var C=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/cms-admin/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,201!==t.status?j.b.warn(a.message,{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):j.b.success(a.message,{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:""}),Object(b.jsx)(P,{}),Object(b.jsxs)("div",{className:"admin",children:[Object(b.jsx)(k,{}),Object(b.jsxs)("div",{className:"col container my-3",children:[Object(b.jsx)("h1",{children:"Your Profile"}),Object(b.jsx)("br",{}),Object(b.jsxs)("h5",{children:["Email: ",r.email]}),Object(b.jsxs)("h5",{children:["Name: ",r.name]}),Object(b.jsx)("br",{}),w,Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:C,className:"btn btn-outline-secondary",children:"Change Password"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)(u.b,{to:"/admin/logoutall",className:"btn btn-danger mt-auto",children:"Logout from all devices"})]})]})]})},F=function(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1];Object(s.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/cms-admin/add-admin");case 3:return t=e.sent,e.next=6,t.json();case 6:e.sent.success&&r(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Add Admin"}),Object(b.jsx)("br",{}),Object(b.jsx)(f,{submit:O,submitValue:"Add Admin",inputs:h,data:u,setData:m})]})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var n=Object(p.f)(),c=Object(s.useState)({name:"",email:"",password:"",cpassword:""}),o=Object(d.a)(c,2),u=o[0],m=o[1],h=[{type:"text",name:"name",placeholder:"Name",icon:"fa fa-user"},{type:"email",name:"email",placeholder:"E-mail",icon:"fas fa-envelope"},{type:"password",name:"password",placeholder:"Password",icon:"fas fa-lock"},{type:"password",name:"cpassword",placeholder:"Confirm Password",icon:"fas fa-lock"}],O=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,s,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=u.name,s=u.email,r=u.password,u.cpassword!==r){e.next=19;break}return m({name:"",email:"",password:"",cpassword:""}),e.prev=4,e.next=7,fetch("/cms-admin/add-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:s,password:r})});case 7:return c=e.sent,e.next=10,c.json();case 10:201!==(o=e.sent).status?j.b.warn(o.message,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(window.confirm(o.message),n.push("/admin/login")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 17:e.next=21;break;case 19:j.b.warn("Passwords must match.",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),m(Object(g.a)(Object(g.a)({},u),{},{cpassword:""}));case 21:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return a},E=function(){var e=Object(s.useContext)(R).admins,t=Object(s.useState)(""),a=Object(d.a)(t,2),r=a[0],n=a[1];return Object(s.useEffect)((function(){var t=e.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:++t}),Object(b.jsxs)("td",{children:[e.name," ",Object(b.jsx)("b",{children:e.owner?"(Owner)":""})]}),Object(b.jsx)("td",{children:e.email})]},t)}));n(Object(b.jsx)("div",{className:"scrollable",children:Object(b.jsxs)("table",{className:"table table-striped table-hover table-light",children:[Object(b.jsx)("thead",{className:"table-primary",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"No."}),Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Email"})]})}),Object(b.jsx)("tbody",{children:t})]})}))}),[e]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{url:""}),Object(b.jsx)(P,{}),Object(b.jsxs)("div",{className:"admin",children:[Object(b.jsx)(k,{}),Object(b.jsxs)("div",{className:"col container my-3",children:[r," ",Object(b.jsx)("br",{}),Object(b.jsx)(F,{})]})]})]})},R=Object(s.createContext)(),A=[{path:"",component:Object(b.jsx)(S,{})},{path:"setup",component:Object(b.jsx)(h,{url:"setup"})},{path:"setup/1",component:Object(b.jsx)(y,{})},{path:"setup/2",component:Object(b.jsx)(C,{})},{path:"login",component:Object(b.jsx)(x,{})},{path:"logout",component:Object(b.jsx)(h,{url:"/logout"})},{path:"logoutall",component:Object(b.jsx)(h,{url:"/logoutall"})},{path:"add-admin",component:Object(b.jsx)(B,{})},{path:"forgot-password",component:Object(b.jsx)(D,{})},{path:"change-password",component:Object(b.jsx)(H,{})},{path:"profile",component:Object(b.jsx)(T,{})},{path:"admins",component:Object(b.jsx)(E,{})}],M=function(e,t){return"changeAdmin"===t.type?t.payload:e},J=function(){var e=Object(s.useReducer)(M,0),t=Object(d.a)(e,2),a=t[0],r=t[1],n=Object(s.useState)({name:"",email:""}),c=Object(d.a)(n,2),o=c[0],m=c[1],h=Object(s.useState)([]),O=Object(d.a)(h,2),g=O[0],f=O[1];return Object(s.useEffect)((function(){return function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/cms-admin");case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).success&&(m({name:a.data.name,email:a.data.email}),f(a.admins)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j.b.warn("Server is restarting. Refresh the page and try again.",{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[a]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(j.a,{}),Object(b.jsx)(R.Provider,{value:{state:a,dispatch:r,data:o,admins:g},children:Object(b.jsx)(u.a,{children:Object(b.jsxs)(p.c,{children:[A.map((function(e,t){return Object(b.jsx)(p.a,{path:"/admin/".concat(e.path),exact:!0,children:e.component},t)})),Object(b.jsx)(p.a,{children:Object(b.jsx)(v,{})})]})})}),Object(b.jsx)(w,{})]})},V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,37)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(u.a,{children:Object(b.jsx)(J,{})})}),document.getElementById("root")),V()}},[[36,1,2]]]);
//# sourceMappingURL=main.9c346fd6.chunk.js.map